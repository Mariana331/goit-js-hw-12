{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page = 1, perPage = 15) {\n  const Base_URL = 'https://pixabay.com/api/';\n  const API_KEY = '50282813-8cc06f543c0e53ea72b225e01';\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    page,\n  });\n  const url = `${Base_URL}?${params}`;\n  const response = await axios.get(url);\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector(`.gallery`);\nconst loader = document.querySelector('#loader');\nconst btn = document.querySelector('.btn');\n\nconst newLightBox = new SimpleLightbox(`.gallery a`, {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n     class=\"gallery-image\"       src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <div class=\"info-image\">\n  <div class=\"info-box\">\n  <h4 class=info-item>likes</h4>\n  <p class=info-text>${likes}</p>\n  </div>\n  <div class=\"info-box\">\n  <h4 class=info-item>views</h4>\n  <p class=info-text>${views}</p>\n  </div>\n  <div class=\"info-box\">\n   <h4 class=info-item>comments</h4>\n  <p class=info-text>${comments}</p>\n  </div>\n  <div class=\"info-box\">\n  <h4 class=info-item>downloads</h4>\n  <p class=info-text>${downloads}</p>\n   </div>\n   </div>\n</li>`;\n      }\n    )\n    .join(`\\n`);\n\n  gallery.insertAdjacentHTML(`beforeend`, markup);\n\n  newLightBox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  btn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  btn.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n} from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input');\nconst btn = document.querySelector('.btn');\n\nlet currentQuery = '';\nlet currentPage = 1;\nconst perPage = 15;\nlet totalPages = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const query = input.value.trim();\n\n  if (!query) {\n    return iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  await loadImages();\n  form.reset();\n});\n\nbtn.addEventListener('click', async () => {\n  currentPage++;\n  await loadImages(true);\n});\n\nasync function loadImages(isLoadMore = false) {\n  showLoader();\n  btn.disabled = true;\n\n  try {\n    const data = await getImagesByQuery(currentQuery, currentPage, perPage);\n\n    if (!data.hits.length) {\n      hideLoadMoreButton();\n      return iziToast.error({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query.',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n      });\n    }\n\n    createGallery(data.hits);\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (currentPage < totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'End',\n        message: \"You've reached the end of search results.\",\n        backgroundColor: '#4CAF50',\n        position: 'topRight',\n      });\n    }\n\n    if (isLoadMore) {\n      const { height } = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n      window.scrollBy({ top: height * 2, behavior: 'smooth' });\n    }\n  } catch (err) {\n    iziToast.error({\n      title: 'Error',\n      message: 'An error occurred while fetching images.',\n      backgroundColor: '#ef4040',\n      position: 'topRight',\n    });\n    hideLoadMoreButton();\n  } finally {\n    hideLoader();\n    btn.disabled = false;\n  }\n}\n"],"names":["getImagesByQuery","query","page","perPage","Base_URL","API_KEY","params","url","axios","gallery","loader","btn","newLightBox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","currentQuery","currentPage","totalPages","event","iziToast","loadImages","isLoadMore","data","height"],"mappings":"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"}